

# 分库分表  
## 分库分表及多维度查询  
**<font color = "lime">1. 方案一：以第一维度进行拆分，第二维度拼接第一维度。2. 方案二：数据冗余。</font>**

&emsp; 以电商模型订单库为目标问题。  
1. 以用户id为分片键，订单号尾部拼接用户id后四位。根据后四位取模分片。  
2. 订单号维度查询，订单号后四位定位库。用户维度查询，支持分页。  
3. 如果涉及到其他维度，比如订单里面有商品，商家需要根据商品维度查询排序分页，可以双写一份商家备份库，因为商家查询频率不会和c端用户一样高，且对实时性要求️有容忍性，所以可以用biolog同步双写数据。  
4. 如果还有其他一些查询频率更低，且实时性无要求，也通过biolog同步一份数据到kudu数据仓库，利用大数据olap等技术做查询操作。  

## 历史订单  
<!-- 
https://www.jianshu.com/p/11d10910247b

https://blog.csdn.net/jokemqc/article/details/82834748

https://mp.weixin.qq.com/s/Sfs8HtkL1C_pckkzLG--2g
-->

