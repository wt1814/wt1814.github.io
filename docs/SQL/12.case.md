

<!-- 


-->




<!-- 


子查询优化
一次非常有意思的 SQL 优化经历：从 30248.271s 到 0.001s 
https://mp.weixin.qq.com/s/rjkvvd2ia1A_Ix6rHYTgpw
**limit，子查询优化
一次 SQL 查询优化原理分析（900W+ 数据，从 17s 到 300ms）
https://mp.weixin.qq.com/s/7CAuMI7mzFxENfRCM4N65g


强制使用索引失败，要用analyze tables，看它有没有再重新组队。  
-->

# Sql优化的一些案例  

## 百万级别或以上的数据如何删除？  
&emsp; 关于索引：由于索引需要额外的维护成本，因为索引文件是单独存在的文件,所以对数据的增加,修改,删除,都会产生额外的对索引文件的操作,这些操作需要消耗额外的IO,会降低增/改/删的执行效率。所以，在删除数据库百万级别数据的时候，查询MySQL官方手册得知删除数据的速度和创建的索引数量是成正比的。  
1. 所以想要删除百万数据的时候可以先删除索引（此时大概耗时三分多钟）  
2. 然后删除其中无用数据（此过程需要不到两分钟）  
3. 删除完成后重新创建索引(此时数据较少了)创建索引也非常快，约十分钟左右。  
4. 与之前的直接删除绝对是要快速很多，更别说万一删除中断,一切删除会回滚。那更是坑了。  

## 优化器选错索引  
<!--

MySQL 索引优化实例
https://mp.weixin.qq.com/s/dUgonoftcSGjlWgYpoTEUw
-->


