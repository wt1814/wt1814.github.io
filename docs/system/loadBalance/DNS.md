

# DNS轮询  
&emsp; 有关DNS内容参考[DNS](/docs/network/3.DNS.md)。  

## DNS轮询介绍  
&emsp; 大多域名注册商都支持多条A记录的解析，其实这就是DNS轮询，DNS服务器将解析请求按照A记录的顺序，逐一分配到不同的IP上，这样就完成了简单的负载均衡。

* 优点
    * 基本上无成本，因为往往域名注册商的这种解析都是免费的；
    * 部署方便，除了网络拓扑的简单扩增，新增的Web服务器只要增加一个公网IP即可。

* 缺点
    * 健康检查，如果某台服务器宕机，DNS服务器是无法知晓的，仍旧会将访问分配到此服务器。修改DNS记录全部生效起码要3-4小时，甚至更久；
    * 分配不均，如果几台Web服务器之间的配置不同，能够承受的压力也就不同，但是DNS解析分配的访问却是均匀分配的。其实DNS也是有分配算法的，可以根据当前连接较少的分配、可以设置Rate权重分配等等，只是目前绝大多数的DNS服务器都不支持；
    * 会话保持，如果是需要身份验证的网站，在不修改软件构架的情况下，这点是比较致命的，因为DNS解析无法将验证用户的访问持久分配到同一服务器。虽然有一定的本地DNS缓存，但是很难保证在用户访问期间，本地DNS不过期，而重新查询服务器并指向新的服务器，那么原服务器保存的用户信息是无法被带到新服务器的，而且可能要求被重新认证身份，来回切换时间长了各台服务器都保存有用户不同的信息，对服务器资源也是一种浪费。

## DNS轮询实现  
&emsp; ~~在不同域名注册商购买的域名，使用DNS轮询方式不一样。~~  

