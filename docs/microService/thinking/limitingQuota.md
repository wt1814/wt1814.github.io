


# 如何计算服务限流的配额？  
<!-- 
 如何计算服务限流的配额 
 https://mp.weixin.qq.com/s/hEJbrdqQ7sFOpDLjYbibYw
-->


&emsp; 要明确设置的限流配额都是并发量，它的单位是：个，这一点要区分于我们常用的服务压力指标QPS，因为QPS是指一秒内的请求数，它的单位是 个/S，由于单位不同，它们是不能直接比较的，需要并发量再除以一个时间单位才可以。  
&emsp; 正确的公式应当是：并发量(个)/单个请求耗时(s) > QPS(个/s)。  
&emsp; 但由于Java GC的特性，我们不得不考虑GC期间请求堆积的可能，要处理这种情况，第一种是直接拒绝，像Hystrix的实现（有点坑），第二种是做一些缓冲。  

