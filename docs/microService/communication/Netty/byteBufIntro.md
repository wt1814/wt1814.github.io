


# 内存管理  

## 内存简介  

&emsp; **堆内内存和堆外内存：**  
&emsp; Netty基于NIO开发，有堆内内存、堆外内存，此外还有Unsafe。  

* Pooled：池化内存，就是从预先分配好的内存空间中提取一段连续内存封装成一个ByteBuf分给应用程序使用。  
* Unsafe：是JDK 底层的一个负责IO 操作的对象，可以直接拿到对象的内存地址，基于内存地址进行读写操作。  
* Direct：堆外内存，是直接调用JDK 的底层API 进行物理内存分配，不在JVM 的堆内存中，需要手动释放。  

note： 使用堆外内存的优势在于，Java进行I/O操作时，需要传入数据所在缓冲区起始地址和长度，由于GC的存在，对象在堆中的位置往往会发生移动，导致对象地址变化，系统调用出错。为避免这种情况，当基于堆内存进行I/O系统调用时，需要将内存拷贝到堆外，而直接基于堆外内存进行I/O操作的话，可以节省该拷贝成本   


&emsp; **池化内存：**  


