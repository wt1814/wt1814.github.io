
<!-- TOC -->

- [1. 六合数字化心理平台](#1-六合数字化心理平台)
    - [1.1. 简历上写的](#11-简历上写的)
    - [1.2. 项目介绍](#12-项目介绍)
    - [1.3. 项目收获](#13-项目收获)
    - [1.4. 项目难点](#14-项目难点)

<!-- /TOC -->


# 1. 六合数字化心理平台  

## 1.1. 简历上写的


## 1.2. 项目介绍 


## 1.3. 项目收获  


## 1.4. 项目难点  


1. 分库分表：  

    0. 主键设计：用户id，项目id，量表id，测评结果表（分8个库，主键id后3位使用用户id），采用hash分片  
    1. 根据主键查，
    2. 根据用户id查询，
    3. 根据量表id查？？？？
    4. 全表查，使用ES查。  

    &emsp; 分表id基因法： userId --> 换算二进制---> 抽取3位  --->  生成分表id前60+刚刚的30  

2. ES使用：  
    1. 采用定时同步到ES。  
    2. ES分页模糊：
        https://blog.csdn.net/chaitao100/article/details/125889713  
        searchSourceBulider https://blog.csdn.net/qq_39601612/article/details/104680399  
        https://developer.aliyun.com/article/1234768     


3. 并发高  
    1. 支持5W人同时在线测。5题一提交，最后一题提交时，查询所有题是否做完。  
    2. 性能：单台4c8G的QPS6000，5W人总QPS8W，需要15台服务器左右。  

--------

CPU利用率：CPU利用率在过去常常被我们这些外行认为是判断机器是否已经到了满负荷的一个标准。看到70%-80%的使用率就认为机器就已经压到了临界了。  

https://www.cnblogs.com/capacity-yang/p/13064775.html 

　　假设服务并发度为1500，RT为150ms，那么该服务的QPS 为10000 = 1500（并发数） /  0.15 （RT响应时间） ，假如通过压测一台机器的QPS为500，那么该服务需要20台这样的机器。


一直再说高并发，多少QPS才算高并发？  
比如微博每天1亿多pv的系统一般也就1500QPS，5000QPS峰值。

比如有人说：

2C4G机器单机一般1000QPS。
8C8G机器单机可承受7000QPS。

