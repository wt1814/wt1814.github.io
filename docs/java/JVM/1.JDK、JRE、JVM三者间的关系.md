
- [1. JDK](#1-jdk)
- [2. JRE](#2-jre)
- [3. JVM](#3-jvm)

<!-- 
https://mp.weixin.qq.com/s/h-q3yfadzGOpx9XKfWBkfw 

https://mp.weixin.qq.com/s/PFlZXXZU-zu_prCg5g4V0Q
jvm全套 链接: https://pan.baidu.com/s/1PcaER6cNiDt6teawLOwpgQ 提取码: c5fh

-->

# 1. JDK  
&emsp; JDK（Java SE Development Kit）：是整个JAVA的核心，Java标准开发包。它提供了编译、运行Java程序所需的各种工具和资源，包括Java编译器即JDK中的javac.exe、Java运行环境JRE，以及Java基础的类库（即Java API，包括rt.jar）。  
&emsp; 下图是JDK的安装目录：  
![image](https://gitee.com/wt1814/pic-host/raw/master/images/java/JVM/JVM-1.png)  
&emsp; Java程序从源代码到运行一般有下面3步：  
![image](https://gitee.com/wt1814/pic-host/raw/master/images/java/JVM/JVM-2.png)  
&emsp; Java源文件，通过编译器，能够生产相应的.Class文件，也就是字节码文件；而字节码文件又通过Java虚拟机中的解释器，编译成特定机器上的机器码。  

# 2. JRE  
&emsp; JRE：Java运行时环境，如果仅仅是用来部署和运行Java程序，只需要安装jre。它主要包含两个部分，jvm的标准实现和Java的一些基本类库。  
&emsp; 下图是JRE的安装目录：里面有两个文件夹bin和lib，在这里可以认为bin里的就是jvm，lib中则是jvm工作所需要的类库，而jvm和lib合起来就称为jre。  
![image](https://gitee.com/wt1814/pic-host/raw/master/images/java/JVM/JVM-3.png)  
&emsp; 如果安装了JDK，会发现电脑中有两套JRE，一套位于/Java/jre.../下，一套位于/Java/jdk.../jre下。一台机器上有两套以上JRE，java.exe选择合适的JRE来运行java程序。java.exe按照以下的顺序来选择JRE，找到JVM的绝对路径：  
1. 自己目录下有没有JRE；  
2. 父目录下有没有JRE；  
3. 查询注册表：HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java Runtime Environment\"当前JRE版本号"\JavaHome。  

# 3. JVM  
&emsp; JVM(Java Virtual Mechinal)：Java虚拟机，是JRE的一部分，是整个java实现跨平台的最核心的部分，是可运行java字节码文件.class的虚拟计算机。  
&emsp; **JVM标准结构：**  
![image](https://gitee.com/wt1814/pic-host/raw/master/images/java/JVM/JVM-4.png)  
&emsp; <font color = "red">JVM由4大部分组成：类加载器ClassLoader，运行时数据区Runtime Data Area，执行引擎Execution Engine，本地方法调用Native Interface。</font>  

<!-- 
类加载器（ClassLoader），负责加载class文件，class文件在文件开头有特定的文件标示，并且ClassLoader只负责class文件的加载，至于它是否可以运行，则由Execution Engine决定。  
运行时数据区（Runtime Data Area）。  
执行引擎（Execution Engine），也叫Interpreter。Class文件被加载后，会把指令和数据信息放入内存中，Execution Engine则负责把这些命令解释给操作系统。  
本地方法调用（Native Interface），是负责调用本地接口的。作用是调用不同语言的接口给JAVA用，会在Native Method Stack中记录对应的本地方法，然后调用该方法时就通过Execution Engine加载对应的本地lib。原本多用于一些专业领域，如JAVA驱动，地图制作引擎等，现在关于这种本地方法接口的调用已经被类似于Socket通信，WebService等方式取代。  
-->

* 类加载器，在 JVM 启动时或者类运行时将需要的class加载到JVM中  
* 执行引擎，执行引擎的任务是负责执行 class 文件中包含的字节码指令，相当于实际机器上的CPU  
* 运行时数据区，将内存划分成若干个区以模拟实际机器上的存储、记录和调度功能模块，如实际机器上的各种功能的寄存器或者 PC 指针的记录器等  
* 本地方法调用，调用C或C++实现的本地方法的代码返回结果  
  
&emsp; **<font color = "red">各组件的作用(JVM执行程序的过程)：</font>** 首先通过类加载器（ClassLoader）会把Java代码转换成字节码，运行时数据区（Runtime Data Area）再把字节码加载到内存中，而字节码文件只是JVM的一套指令集规范，并不能直接交给底层操作系统去执行，因此需要特定的命令解析器执行引擎（Execution Engine），将字节码翻译成底层系统指令，再交由CPU去执行，而这个过程中需要调用其他语言的本地库接口（Native Interface）来实现整个程序的功能。  

&emsp; **JVM与不同系统（JVM的平台无关性）：** java能跨平台，实现一次编写，多处运行。Java能够跨平台运行的核心在于JVM 。不是Java能够跨平台，而是它的jvm能够跨平台。Java虚拟机屏蔽了与具体操作系统平台相关的信息，只要为不同平台实现了相应的虚拟机，编译后的Java字节码就可以在该平台上运行。  
