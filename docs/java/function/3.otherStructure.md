---
title: 其他数据结构
date: 2020-06-03 00:00:00
tags:
    - 算法
---

<!-- TOC -->

- [1. 跳跃表](#1-跳跃表)
    - [1.1. 跳跃表的基本操作](#11-跳跃表的基本操作)
        - [1.1.1. 插入节点](#111-插入节点)
        - [1.1.2. 删除节点](#112-删除节点)
- [2. 位图Bitmap](#2-位图bitmap)
- [3. 布隆过滤器](#3-布隆过滤器)
    - [3.1. 布隆算法实现](#31-布隆算法实现)
        - [3.1.1. RedisBloom](#311-redisbloom)
        - [3.1.2. guava的BloomFilter](#312-guava的bloomfilter)

<!-- /TOC -->

# 1. 跳跃表  

&emsp; 跳跃表SkipList，一种基于有序链表的扩展，是一个多层索引链表，简称跳表。跳表是一种空间换时间的数据结构，通过冗余数据，将链表一层一层索引，达到类似二分查找的效果。  
![image](https://gitee.com/wt1814/pic-host/raw/master/images/java/function/function-1.png)  

&emsp; 跳跃表和二叉查找树的区别：跳跃表的优点是维持结构平衡的成本比较低，完全依靠随机。而二叉查找树在多次插入删除后，需要自平衡来重新调整结构平衡。  

## 1.1. 跳跃表的基本操作  
### 1.1.1. 插入节点  
&emsp; 跳跃表插入节点的步骤：  
1. 新节点和各层索引节点逐一比较，确定原链表的插入位置。O(logN）
2. 把索引插入到原链表。O(1）
3. 利用抛硬币的随机方式，决定新节点是否提升为上一级索引。结果为“正”则提升并继续抛硬币，结果为“负”则停止。O(logN）  

&emsp; 总体上，跳跃表插入操作的时间复杂度是O(logN)，而这种数据结构所占空间是2N，既空间复杂度是O(N)。  

### 1.1.2. 删除节点  
&emsp; 跳跃表删除节点的步骤：  

1. 自上而下，查找第一次出现节点的索引，并逐层找到每一层对应的节点。O(logN）
2. 删除每一层查找到的节点，如果该层只剩下1个节点，删除整个一层(原链表除外)。O(logN）  

&emsp; 总体上，跳跃表删除操作的时间复杂度是O(logN）。  

----
# 2. 位图Bitmap  
......

# 3. 布隆过滤器  

&emsp; BloomFilter 是由一个固定大小的二进制向量或者位图（bitmap）和一系列（通常好几个）映射函数组成的。  
&emsp; 布隆过滤器的原理：当一个变量被加入集合时，通过K个映射函数将这个变量映射成位图中的 K 个点，把它们置为1。  
![image](https://gitee.com/wt1814/pic-host/raw/master/images/java/function/function-2.png)  

&emsp; 查询某个变量的时候，只要看看这些点是不是都是1，就可以大概率知道集合中有没有它了。  

    如果这些点有任何一个0，则被查询变量一定不在；
    如果都是1，则被查询变量很可能在。  

&emsp; 注意，这里是可能存在，而不是一定存在！  

* 优点：占用内存少，新增、查询效率高。  
* 缺点：**<font color = "red">误判率和不能删除</font>**。  

        布隆过滤器的误判是指多个输入经过哈希之后在相同的bit位置1了，这样就无法判断究竟是哪个输入产生的，因此误判的根源在于相同的 bit位被多次映射且置1。  
        这种情况也造成了布隆过滤器的删除问题，因为布隆过滤器的每一个 bit 并不是独占的，很有可能多个元素共享了某一位。如果直接删除这一位的话，会影响其他的元素。  

* 特点总结：  
    * 一个元素如果判断结果为存在的时候元素不一定存在，但是判断结果为不存在的时候则一定不存在。  
    * 布隆过滤器可以添加元素，但是不能删除元素。因为删掉元素会导致误判率增加。  

&emsp; **使用场景：**  
&emsp; 布隆过滤器适合于一些需要去重，但不一定要完全精确的场景。比如：  

    1. 黑名单 
    2. URL去重
    3. 单词拼写检查
    4. Key-Value缓存系统的Key校验 
    5. ID校验，比如订单系统查询某个订单ID是否存在，如果不存在就直接返回。

## 3.1. 布隆算法实现  
### 3.1.1. RedisBloom  
......

### 3.1.2. guava的BloomFilter  
......



