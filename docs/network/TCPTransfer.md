

# TCP传输阶段
<!-- 
https://baike.baidu.com/item/TCP/33012?fr=aladdin#3
-->
&emsp; TCP在确保传输层服务的可靠性上，具体举措包括（但不限于）以下：  

* 应用数据切割：应用数据被分隔成TCP认为最适合发送的多个报文段（由特定的算法和机制来确认）；  
* 接收端确认：接收端收到报文段后，会向发送端发送确认报文；  
* **超时重传机制：**发送端发送一个报文段后，会启动定时器，等待接收端确认收到这个报文；如果没有及时收到确认，发送端会重新发送报文；  
* 数据校验和：发送端发送的报文首部中，有个叫做校验和（checksum）的特殊字段，它是根据报文的首部、数据计算出来的。这是一个端到端的校验和，用来检测传输过程数据的变化。接收端收到报文后会对校验和进行检查，如果校验和存在差错，则丢弃这个报文，且不确认收到此报文(等待发送端超时重发)；  
* 报文段排序：TCP报文包裹在IP数据包里进行传输，而IP数据包的到达次序是不固定的。接收端会对接收到的报文段重新排序，这个对应用层是无感知的；  
* 去重复：接收端丢弃重复的报文(比如，因某些原因，虽然接收端已经收到报文，且给发送端发送了接收确认，但接收端没有收到该确认，超时后重新发送了同样的报文)；  
* **流量控制：**TCP连接双方都有固定大小的缓冲空间，且只允许发送端发送缓冲空间能够容纳的数据，避免缓冲区溢出；  


