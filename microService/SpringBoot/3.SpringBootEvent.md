---
title: Spring Boot事件监听机制
date: 2020-04-14 00:00:00
tags:
    - SpringBoot
---


# 引言  
&emsp; 在SpringBoot启动过程中，每个不同的启动阶段会分别广播不同的内置生命周期事件，然后相应的监听器会监听这些事件来执行一些初始化逻辑工作。比如ConfigFileApplicationListener会监听onApplicationEnvironmentPreparedEvent事件，来加载配置文件application.properties的环境变量等。  


# SpringBoot事件监听机制分析  
&emsp; SpringBoot启动时广播生命周期事件步骤：    
1. 为广播SpringBoot内置生命周期事件做前期准备：    
    1. 首先加载ApplicationListener监听器实现类；  
    2. 其次加载SPI扩展类EventPublishingRunListener。  
2. SpringBoot启动时利用EventPublishingRunListener广播生命周期事件，然后ApplicationListener监听器实现类监听相应的生命周期事件执行一些初始化逻辑的工作。  





# SpringBoot内置生命周期事件详解  
&emsp; SpringBoot的生命周期事件，类结构图如下：  
![image](https://gitee.com/wt1814/pic-host/raw/master/images/sourceCode/springBoot/boot-6.png)  
&emsp; 事件类之间的关系：  
1. 最顶级的父类是JDK的事件基类EventObject；  
2. 然后Spring的事件基类ApplicationEvent继承了JDK的事件基类EventObject；  
3. 其次SpringBoot的生命周期事件基类SpringApplicationEvent继承了Spring的事件基类ApplicationEvent；  
4. 最后SpringBoot具体的7个生命周期事件类再继承了SpringBoot的生命周期事件基类SpringApplicationEvent。  








